# ูุธุงู ุงูุชุฎุตูุต ุงูุชููุงุฆู ูุฃุฑูุงู 3CX

## ๐ฏ ุงููุธุงุฆู ุงููุชููุฑุฉ

### 1. ุงูุชุณุฌูู ุงูุชููุงุฆู ููุจุงุฆุน
ุนูุฏ ุชุณุฌูู ุจุงุฆุน ุฌุฏูุฏุ ูุชู ุชููุงุฆูุงู:
- โ ุฅูุดุงุก ุฑูู ุฏุงุฎูู ูุฑูุฏ ูู 3CX (ูุซุงู: 2001ุ 2002ุ ุฅูุฎ)
- โ ุฅูุดุงุก ุญุณุงุจ SIP ููุจุงุฆุน
- โ ุชูุนูู Web Client
- โ ุฅุฑุณุงู ุจูุงูุงุช ุงูุงุชุตุงู ููุจุงุฆุน

### 2. ููุญุฉ ุชุญูู ุงูุจุงุฆุน
ูููู ููุจุงุฆุน:
- ๐ ุฑุคูุฉ ุฑููู ุงูุฏุงุฎูู
- ๐ ูุชุญ Web Client ูุจุงุดุฑุฉ
- ๐ ูุนุฑูุฉ ุญุงูุฉ ุงูุงุชุตุงู (ูุชุตู/ุบูุฑ ูุชุตู)
- ๐ ุงูุญุตูู ุนูู ุจูุงูุงุช SIP

---

## ๐ ุงููููุงุช ุงูููุดุฃุฉ

### Backend API:
1. **`/api/vendor/auto-assign-extension/route.ts`**
   - POST: ุฅูุดุงุก ุฑูู ุฌุฏูุฏ ุนูุฏ ุงูุชุณุฌูู
   - GET: ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุฑูู ุงูุญุงูู
   
### Frontend Components:
2. **`VendorRegistrationForm.tsx`**
   - ูููุฐุฌ ุชุณุฌูู ุงูุจุงุฆุน
   - ุฅูุดุงุก ุฑูู ุชููุงุฆู ุนูุฏ ุงูุฅุฑุณุงู
   
3. **`VendorPhoneExtension.tsx`**
   - ุนุฑุถ ูุนูููุงุช ุฑูู ุงูุจุงุฆุน
   - ุฒุฑ ูุชุญ Web Client
   - ุญุงูุฉ ุงูุงุชุตุงู
   
### Pages:
4. **`/vendor-register/page.tsx`**
   - ุตูุญุฉ ุชุณุฌูู ุงูุจุงุฆุนูู ุงูุฌุฏุฏ
   
5. **`/vendor-dashboard/page.tsx`**
   - ููุญุฉ ุชุญูู ุงูุจุงุฆุน ูุน ูุนูููุงุช ุงูุฑูู

---

## ๐ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุทูุฑูู:

#### 1. ุฅูุดุงุก ุฑูู ุชููุงุฆูุงู ุนูุฏ ุงูุชุณุฌูู:

```typescript
const response = await fetch('/api/vendor/auto-assign-extension', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    vendorId: 'vendor_123',
    name: 'ุฃุญูุฏ ูุญูุฏ',
    email: 'vendor@example.com',
    phone: '+963123456789'
  })
});

const data = await response.json();
console.log('Extension Number:', data.extension.number);
```

#### 2. ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุฑูู:

```typescript
const response = await fetch('/api/vendor/auto-assign-extension?vendorId=vendor_123');
const data = await response.json();

if (data.hasExtension) {
  console.log('Number:', data.extension.number);
  console.log('Status:', data.extension.status);
}
```

#### 3. ุงุณุชุฎุฏุงู ุงููููู ูู ุฃู ุตูุญุฉ:

```tsx
import VendorPhoneExtension from '@/components/common/VendorPhoneExtension';

<VendorPhoneExtension vendorId="vendor_123" />
```

---

## ๐ง ุฅุนุฏุงุฏุงุช 3CX ุงููุทููุจุฉ

ุชุฃูุฏ ูู ุฅุถุงูุฉ ูุฐู ุงููุชุบูุฑุงุช ูู `.env.production`:

```bash
# 3CX Configuration
NEXT_PUBLIC_3CX_DOMAIN=your-3cx-server.com
CX_API_URL=https://your-3cx-server.com:5001/api
CX_API_TOKEN=your_3cx_api_token
```

---

## ๐ ููู ูุนูู ุงููุธุงูุ

### ุนูููุฉ ุงูุชุณุฌูู:

```
1. ุงูุจุงุฆุน ูููุฃ ูููุฐุฌ ุงูุชุณุฌูู
   โ
2. ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู API
   โ
3. ุงููุธุงู ูุชุญูู: ูู ููุฌุฏ ุฑูู ุณุงุจูุ
   โโ ูุนู โ ูุนูุฏ ุงูุฑูู ุงูููุฌูุฏ
   โโ ูุง โ ููุดุฆ ุฑูู ุฌุฏูุฏ ูู 3CX
   โ
4. ูุชู ุฅุฑุฌุงุน ูุนูููุงุช ุงูุฑูู ููุจุงุฆุน
   โ
5. ุงูุจุงุฆุน ูุญุตู ุนูู:
   - ุฑูู ุฏุงุฎูู (Extension)
   - ุจูุงูุงุช SIP
   - ุฑุงุจุท Web Client
```

### ุขููุฉ ุชูููุฏ ุงูุฃุฑูุงู:

```typescript
// ูุชู ุชูููุฏ ุฑูู ูุฑูุฏ ุจูุงุกู ุนูู vendor ID
// ูุซุงู: vendor_123 โ 2345 (ุฑูู ุฏุงุฎูู)

function generateExtensionNumber(vendorId: string): string {
  const hash = vendorId.split('').reduce((acc, char) => {
    return acc + char.charCodeAt(0);
  }, 0);
  
  // ุฃุฑูุงู ูู 2000 ุฅูู 9999
  const extension = 2000 + (hash % 8000);
  return extension.toString();
}
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุงุฎุชุจุงุฑ ุงูุชุณุฌูู:
ุฒุฑ ุงูุตูุญุฉ: `http://localhost:3000/vendor-register`

### 2. ุงุฎุชุจุงุฑ ููุญุฉ ุงูุชุญูู:
ุฒุฑ ุงูุตูุญุฉ: `http://localhost:3000/vendor-dashboard`

### 3. ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ:

```bash
# PowerShell
$body = @{
  vendorId = "test_vendor_1"
  name = "ูุญูุฏ ุฃุญูุฏ"
  email = "test@example.com"
  phone = "+963987654321"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3000/api/vendor/auto-assign-extension" `
  -Method POST `
  -ContentType "application/json" `
  -Body $body
```

---

## โ๏ธ ุงูููุฒุงุช ุงูุชููุงุฆูุฉ

### โ ุนูุฏ ุชุณุฌูู ุจุงุฆุน ุฌุฏูุฏ:
- ุฑูู ุฏุงุฎูู ูุฑูุฏ
- ุญุณุงุจ SIP
- Web Client ููุนูู
- ุฏุนู ุงูุฏุฑุฏุดุฉ
- ุชุณุฌูู ุงูููุงููุงุช

### โ ูู ููุญุฉ ุงูุชุญูู:
- ุนุฑุถ ุงูุฑูู ุงูุฏุงุฎูู
- ุญุงูุฉ ุงูุงุชุตุงู (Online/Offline)
- ุฒุฑ ูุชุญ Web Client
- ุจูุงูุงุช SIP ููุชูููู ุงููุฏูู

### โ ุงููุฑููุฉ:
- ุฅุฐุง ูุงู 3CX ุบูุฑ ูุชุงุญุ ูุง ูุชู ุญุธุฑ ุงูุชุณุฌูู
- ุงููุธุงู ูุญุงูู ูุฑุฉ ุฃุฎุฑู ูุงุญูุงู
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู

---

## ๐ ุงูุฑูุงุจุท ุงููููุฏุฉ

- ุตูุญุฉ ุงูุชุณุฌูู: `/vendor-register`
- ููุญุฉ ุงูุชุญูู: `/vendor-dashboard`
- API Endpoint: `/api/vendor/auto-assign-extension`

---

## ๐ฑ ุงุณุชุฎุฏุงู Web Client

ุจุนุฏ ุงูุญุตูู ุนูู ุงูุฑููุ ุงูุจุงุฆุน ููููู:

1. **ูู ุงููุชุตูุญ:**
   - ุงูุถุบุท ุนูู "ูุชุญ Web Client"
   - ุชุณุฌูู ุงูุฏุฎูู ุจู SIP User & Password
   - ุฅุฌุฑุงุก ูุงุณุชูุจุงู ุงูููุงููุงุช

2. **ูู ุชุทุจูู 3CX:**
   - ุชุญููู ุชุทุจูู 3CX ููููุจุงูู
   - ุฅุฏุฎุงู ุจูุงูุงุช SIP
   - ุงุณุชุฎุฏุงู ุงูุฑูู ูู ุฃู ููุงู

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุชูููู ุฎุงุฏู 3CX
2. โ ุฅุถุงูุฉ API Token ูู `.env`
3. โ ุงุฎุชุจุงุฑ ุงูุชุณุฌูู
4. โ ุฏูุฌ ูุน ูุธุงู ุงููุตุงุฏูุฉ ุงูุญุงูู
5. โ ุฅุถุงูุฉ ุชูุงุฑูุฑ ุงูููุงููุงุช

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐
